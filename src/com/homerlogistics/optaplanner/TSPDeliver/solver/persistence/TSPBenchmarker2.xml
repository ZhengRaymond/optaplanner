<?xml version="1.0" encoding="UTF-8"?>
<plannerBenchmark>
<benchmarkDirectory>benchmark/TSPDeliver</benchmarkDirectory>
	<parallelBenchmarkCount>AUTO</parallelBenchmarkCount>

	<inheritedSolverBenchmark>
		<problemBenchmarks>
            <writeOutputSolutionEnabled>true</writeOutputSolutionEnabled>
            <solutionFileIOClass>com.homerlogistics.optaplanner.TSPDeliver.solver.persistence.TSPSolutionIO</solutionFileIOClass>
			<!--<inputSolutionFile>data/TSPDeliver/unsolved/25.txt</inputSolutionFile>-->
			<inputSolutionFile>data/TSPDeliver/unsolved/150.txt</inputSolutionFile>
			<!--<inputSolutionFile>data/TSPDeliver/unsolved/1000.txt</inputSolutionFile><problemStatisticType>BEST_SCORE</problemStatisticType>-->
			<problemStatisticType>BEST_SCORE</problemStatisticType>
			<!--<problemStatisticType>STEP_SCORE</problemStatisticType>-->
			<!--<problemStatisticType>SCORE_CALCULATION_SPEED</problemStatisticType>-->
			<!--<problemStatisticType>BEST_SOLUTION_MUTATION</problemStatisticType>-->
			<!--<problemStatisticType>MOVE_COUNT_PER_STEP</problemStatisticType>-->
			<!--<problemStatisticType>MEMORY_USE</problemStatisticType>-->
			<!--<singleStatisticType>CONSTRAINT_MATCH_TOTAL_BEST_SCORE</singleStatisticType>-->
			<!--<singleStatisticType>CONSTRAINT_MATCH_TOTAL_STEP_SCORE</singleStatisticType>-->
			<!--<singleStatisticType>PICKED_MOVE_TYPE_BEST_SCORE_DIFF</singleStatisticType>-->
			<!--<singleStatisticType>PICKED_MOVE_TYPE_STEP_SCORE_DIFF</singleStatisticType>-->
		</problemBenchmarks>

		<solver>
			<solutionClass>com.homerlogistics.optaplanner.TSPDeliver.domain.TSPSolution</solutionClass>
			<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Standstill</entityClass>
			<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
			<scoreDirectorFactory>
				<easyScoreCalculatorClass>com.homerlogistics.optaplanner.TSPDeliver.score.TSPScore</easyScoreCalculatorClass>
				<initializingScoreTrend>ONLY_DOWN</initializingScoreTrend>
			</scoreDirectorFactory>
			<termination>
				<secondsSpentLimit>60</secondsSpentLimit>
			</termination>
		</solver>
	</inheritedSolverBenchmark>


	<solverBenchmark>
		<name>First Fit</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<moveListFactory>
						<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>
					</moveListFactory>
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector/>
				</unionMoveSelector>
			</localSearch>
		</solver>
	</solverBenchmark>

	<solverBenchmark>
		<name>Tabu Search</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<moveListFactory>
						<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>
					</moveListFactory>
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector/>
				</unionMoveSelector>
				<acceptor>
					<entityTabuSize>9</entityTabuSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>2000</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>

	<solverBenchmark>
		<name>First Fit (Late Acceptance)</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<moveListFactory>
						<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>
					</moveListFactory>
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector/>
				</unionMoveSelector>
				<acceptor>
					<lateAcceptanceSize>200</lateAcceptanceSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>1</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>

	<solverBenchmark>
		<name>First Fit (late accept and nearby)</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<moveListFactory>
						<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>
					</moveListFactory>
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
						<!--<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>-->
						<!--<subChainSelector>-->
						<!--<valueSelector>-->
						<!--<nearbySelection>-->
						<!--<originEntitySelector mimicSelectorRef="entitySelector2"/>-->
						<!--<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>-->
						<!--<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>-->
						<!--</nearbySelection>-->
						<!--</valueSelector>-->
						<!--<minimumSubChainSize>2</minimumSubChainSize>-->
						<!--<maximumSubChainSize>40</maximumSubChainSize>-->
						<!--</subChainSelector>-->
						<!--<valueSelector>-->
						<!--<nearbySelection>-->
						<!--<originEntitySelector mimicSelectorRef="entitySelector2"/>-->
						<!--<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>-->
						<!--<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>-->
						<!--</nearbySelection>-->
						<!--</valueSelector>-->
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector>
						<entitySelector id="entitySelector3">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector3"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</tailChainSwapMoveSelector>
				</unionMoveSelector>
				<acceptor>
					<lateAcceptanceSize>200</lateAcceptanceSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>1</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>


	<solverBenchmark>
		<name>First Fit (NO CUSTOM MOVE)</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<!--<moveListFactory>-->
						<!--<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>-->
					<!--</moveListFactory>-->
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector/>
				</unionMoveSelector>
			</localSearch>
		</solver>
	</solverBenchmark>

	<solverBenchmark>
		<name>Tabu Search (NO CUSTOM MOVE)</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<!--<moveListFactory>-->
						<!--<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>-->
					<!--</moveListFactory>-->
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector/>
				</unionMoveSelector>
				<acceptor>
					<entityTabuSize>9</entityTabuSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>2000</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>

	<solverBenchmark>
		<name>First Fit (Late Acceptance) (NO CUSTOM MOVE)</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<!--<moveListFactory>-->
						<!--<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>-->
					<!--</moveListFactory>-->
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector/>
				</unionMoveSelector>
				<acceptor>
					<lateAcceptanceSize>200</lateAcceptanceSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>1</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>

	<solverBenchmark>
		<name>First Fit (late accept and nearby) (NO CUSTOM MOVE)</name>
		<solver>
			<constructionHeuristic>
				<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
			</constructionHeuristic>

			<localSearch>
				<unionMoveSelector>
					<!--<cacheType>PHASE</cacheType>-->
					<!--<selectionOrder>SHUFFLED</selectionOrder>-->
					<!--<moveListFactory>-->
						<!--<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>-->
					<!--</moveListFactory>-->
					<changeMoveSelector>
						<entitySelector id="entitySelector">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</changeMoveSelector>
					<subChainChangeMoveSelector>
						<selectReversingMoveToo>true</selectReversingMoveToo>
						<!--<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>-->
						<!--<subChainSelector>-->
						<!--<valueSelector>-->
						<!--<nearbySelection>-->
						<!--<originEntitySelector mimicSelectorRef="entitySelector2"/>-->
						<!--<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>-->
						<!--<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>-->
						<!--</nearbySelection>-->
						<!--</valueSelector>-->
						<!--<minimumSubChainSize>2</minimumSubChainSize>-->
						<!--<maximumSubChainSize>40</maximumSubChainSize>-->
						<!--</subChainSelector>-->
						<!--<valueSelector>-->
						<!--<nearbySelection>-->
						<!--<originEntitySelector mimicSelectorRef="entitySelector2"/>-->
						<!--<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>-->
						<!--<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>-->
						<!--</nearbySelection>-->
						<!--</valueSelector>-->
					</subChainChangeMoveSelector>
					<tailChainSwapMoveSelector>
						<entitySelector id="entitySelector3">
							<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
						</entitySelector>
						<valueSelector>
							<nearbySelection>
								<originEntitySelector mimicSelectorRef="entitySelector3"/>
								<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.nearbyDistanceMeterChange</nearbyDistanceMeterClass>
								<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
							</nearbySelection>
						</valueSelector>
					</tailChainSwapMoveSelector>
				</unionMoveSelector>
				<acceptor>
					<lateAcceptanceSize>200</lateAcceptanceSize>
				</acceptor>
				<forager>
					<acceptedCountLimit>1</acceptedCountLimit>
				</forager>
			</localSearch>
		</solver>
	</solverBenchmark>

</plannerBenchmark>

