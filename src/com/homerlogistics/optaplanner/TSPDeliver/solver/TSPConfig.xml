<?xml version="1.0" encoding="UTF-8"?>
<solver>
	<!-- Define the model -->
	<solutionClass>com.homerlogistics.optaplanner.TSPDeliver.domain.TSPSolution</solutionClass>
	<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Standstill</entityClass>
	<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>

	<!-- Define the score function -->
	<scoreDirectorFactory>
		<easyScoreCalculatorClass>com.homerlogistics.optaplanner.TSPDeliver.score.TSPScore</easyScoreCalculatorClass>
		<initializingScoreTrend>ONLY_DOWN</initializingScoreTrend>
	</scoreDirectorFactory>

	<!-- Configure the optimization algorithms (optional) -->
  	<termination>
	 	 <secondsSpentLimit>60</secondsSpentLimit>
  	</termination>

	<constructionHeuristic>
		<constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
	</constructionHeuristic>

	<localSearch>
		<unionMoveSelector>
			<moveListFactory>
				<moveListFactoryClass>com.homerlogistics.optaplanner.TSPDeliver.solver.PickupDeliveryChangeMoveFactory</moveListFactoryClass>
			</moveListFactory>
			<changeMoveSelector/>
			<swapMoveSelector/>
			<subChainChangeMoveSelector>
				<selectReversingMoveToo>true</selectReversingMoveToo>
			</subChainChangeMoveSelector>
			<subChainSwapMoveSelector>
				<selectReversingMoveToo>true</selectReversingMoveToo>
			</subChainSwapMoveSelector>
			<tailChainSwapMoveSelector>
				<entitySelector id="entitySelector">
					<entityClass>com.homerlogistics.optaplanner.TSPDeliver.domain.Customer</entityClass>
				</entitySelector>
				<valueSelector>
					<nearbySelection>
						<originEntitySelector mimicSelectorRef="entitySelector"/>
						<nearbyDistanceMeterClass>com.homerlogistics.optaplanner.TSPDeliver.solver.distanceMeter</nearbyDistanceMeterClass>
						<nearbySelectionDistributionType>PARABOLIC_DISTRIBUTION</nearbySelectionDistributionType>
					</nearbySelection>
				</valueSelector>
			</tailChainSwapMoveSelector>
		</unionMoveSelector>
		<acceptor>
			<lateAcceptanceSize>200</lateAcceptanceSize>
		</acceptor>
		<forager>
			<acceptedCountLimit>1</acceptedCountLimit>
		</forager>
	</localSearch>
</solver>
